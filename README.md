# 家計簿アプリケーション

Python + Tkinterで作成したシンプルな家計簿管理アプリケーションです。支出・収入の記録、CSV入出力、統計表示機能を備えています。

## 目次

- [機能概要](#機能概要)
- [実行環境](#実行環境)
- [環境構築](#環境構築)
- [起動方法](#起動方法)
- [使い方](#使い方)
- [ファイル構成](#ファイル構成)
- [データ仕様](#データ仕様)

---

## 機能概要

### 主要機能

1. **収支管理**
   - 支出・収入の記録
   - カテゴリ別の分類
   - メモ機能

2. **データ操作**
   - 追加・編集・削除
   - CSV形式での保存・読込
   - データの一覧表示

3. **統計表示**
   - カテゴリ別集計（円グラフ）
   - 年別集計（棒グラフ）
   - 月別集計（棒グラフ）
   - 支出/収入の切り替え表示

4. **合計表示**
   - ネット残高（収入 - 支出）
   - 支出・収入の内訳表示

---

## 実行環境

### 必須要件

- **Python**: 3.7以上
- **OS**: Windows

### 標準ライブラリ（追加インストール不要）

- `tkinter` - GUI構築
- `csv` - CSV入出力
- `datetime` - 日付処理
- `decimal` - 金額計算

### オプショナルライブラリ（統計機能用）

統計表示機能を使用する場合は以下が必要です：

- `pandas` - データ集計
- `matplotlib` - グラフ描画

---

## 環境構築

### 1. Pythonのインストール

#### Pythonのダウンロード

公式サイトから最新版のPythonをダウンロードしてください：

**公式サイト**: https://www.python.org/downloads/

#### インストール手順（Windows）

1. 上記のサイトから**Windows installer (64-bit)**をダウンロード（端末に合うものを選択して下さい）
2. ダウンロードしたインストーラーを実行
3. **重要**: インストール画面で「**Add Python to PATH**」に必ずチェックを入れる
4. 「Install Now」をクリックしてインストールを開始
5. インストール完了後、PowerShellまたはコマンドプロンプトで以下のコマンドを実行して確認

```powershell
py --version
```
Python 3.7以上がインストールされていることを確認してください。

### 2. オプショナルライブラリのインストール

統計機能を使用する場合は、以下のコマンドを実行してください：

```powershell
py -m pip install pandas matplotlib
```

**注意**: 統計機能が不要な場合、このステップはスキップできます。基本的な収支記録とCSV入出力は標準ライブラリのみで動作します。

### 3. ファイルの配置

以下のファイルを同じディレクトリに配置してください：

```
app/
├── kakeibo.py      # メインアプリケーション
└── summary.py      # 統計表示モジュール
```

---

## 起動方法

```powershell
cd c:\work\kakeibo\app
py kakeibo.py
```

### 起動確認

正常に起動すると、以下のようなウィンドウが表示されます：

- タイトル: 「家計簿（支出管理・一覧・合計）」

---

## 使い方

### 1. 収支の追加

1. **種類を選択**: 「支出」または「収入」のラジオボタンを選択
2. **日付を入力**: YYYY-MM-DD形式（例: 2026-01-20）
3. **カテゴリを選択**: 種類に応じたカテゴリがドロップダウンに表示
4. **金額を入力**: 数値のみ、または「¥1,234」形式
5. **メモを入力**: 任意のメモを記入（省略可）
6. **「追加」ボタンをクリック**

#### 入力チェック

追加/更新時には以下の入力チェックが行われます：

- 日付: ISO形式（YYYY-MM-DD）
- 種類: 「支出」または「収入」
- カテゴリ: 種類に対応したカテゴリリストに存在
- 金額: 0以上の数値

#### 支出カテゴリ

- 食費
- 日用品
- 交通
- 交際費
- 娯楽
- 住居
- 光熱費
- 医療
- 教育
- 貯金
- その他

#### 収入カテゴリ

- 給与
- ボーナス
- 副業
- 投資
- その他収入

### 2. 収支の編集

1. 一覧から編集したい行を**ダブルクリック**
2. フォームに内容が反映される
3. 必要な項目を修正
4. **「更新」ボタンをクリック**

### 3. 収支の削除

1. 一覧から削除したい行を選択（複数選択可: Ctrl + クリック）
2. **「選択削除」ボタンをクリック**
3. 確認ダイアログで「はい」を選択

### 4. フォームのクリア

**「クリア」ボタン**をクリックすると、入力フォームがリセットされます。

### 5. CSV保存

1. **「CSV保存」ボタンをクリック**
2. 保存先とファイル名を指定
3. データがCSV形式で保存される

#### CSV形式

```csv
日付,種類,カテゴリ,金額,メモ
2026-01-20,支出,食費,1500,スーパーで買い物
2026-01-20,収入,給与,250000,1月分給与
```

### 6. CSV読込

1. **「CSV読込」ボタンをクリック**
2. 読み込むCSVファイルを選択
3. バリデーションを通過したデータのみが追加される

#### 読込時のバリデーション

- 日付: ISO形式（YYYY-MM-DD）
- 種類: 「支出」または「収入」
- カテゴリ: 種類に対応したカテゴリリストに存在
- 金額: 0以上の数値

### 7. 統計表示

1. **「統計」ボタンをクリック**
2. 統計ウィンドウが開く（pandas/matplotlibが必要）

#### 統計タブ

- **カテゴリ別**: 円グラフとテーブル
- **年別**: 棒グラフとテーブル
- **月別**: 棒グラフとテーブル

各タブで「支出」「収入」を切り替えて表示できます。

---

## ファイル構成

### kakeibo.py

メインアプリケーションファイル。以下の機能を提供：

- GUI構築（入力フォーム、一覧表示、操作ボタン）
- データ管理（追加、編集、削除）
- CSV入出力
- バリデーション処理
- 合計計算


### summary.py

統計表示モジュール。以下の機能を提供：

- モーダル統計ウィンドウ
- データ集計（pandas）
- グラフ描画（matplotlib）
- タブごとの独立フィルタ

---

## データ仕様

### 内部データ構造

```python
{
    "iid_001": {
        "date": "2026-01-20",
        "transaction_type": "支出",
        "category": "食費",
        "price": Decimal("1500"),
        "memo": "スーパーで買い物"
    }
}
```

### 金額計算ロジック

```
ネット残高 = 収入合計 - 支出合計
```

### データ永続化

- メモリ上でのみ管理（アプリ終了でデータ消失）
- CSVファイルで保存・読込が可能

---

## トラブルシューティング

### 統計ボタンを押すとエラーが出る

**原因**: pandas/matplotlibがインストールされていない

**解決方法**:
```powershell
py -m pip install pandas matplotlib
```

### 日付入力でエラーが出る

**原因**: 日付形式が間違っている

**解決方法**: YYYY-MM-DD形式で入力（例: 2026-01-20）

### 金額に小数点が入力できない

**仕様**: 内部でDecimal型を使用していますが、表示は整数に丸められます

---
